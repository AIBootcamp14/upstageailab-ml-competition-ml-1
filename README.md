# Building a Prediction Model for Seoul Apartment Actual Transaction Prices

## Team
   
| <img src="./project1/team_photos/시진님.jpg" alt="김시진사진" width="140px"> | <img src="./project1/team_photos/me.jpg" alt="김영사진" width="140px"> | <img src="./project1/team_photos/예은님.jpg" alt="정예은사진" width="140px"> | <img src="./project1/team_photos/수정님.jpg" alt="전수정사진" width="140px"> |
| :--------------------------------------------------------------: | :--------------------------------------------------------------: | :--------------------------------------------------------------: | :--------------------------------------------------------------: |
| [김시진](https://github.com/kimsijin33) | [김영](https://github.com/kimyoung9689) | [정예은](https://github.com/wjddpdms03) | [전수정](https://github.com/pochacco0603) |
| 팀장, 데이터 분석, 모델 학습, Feature Engineering | 데이터 전처리, 모델링, Feature Engineering | Feature Engineering | Feature Engineering |





## 1. Competition Info

### Overview

- 본 프로젝트는 서울시 아파트 실거래가 예측 모델 개발을 목표로 합니다. 주어진 아파트 거래 데이터와 다양한 외부 데이터를 활용하여, 아파트 가격에 영향을 미치는 요인들을 분석하고 이를 기반으로 가장 정확한 실거래가 예측 모델을 구축하는 것이 주된 목적입니다. 특히, 아파트의 지리적 위치와 주변 환경 요인들이 가격에 미치는 영향을 심층적으로 분석하고 모델에 반영하여 예측 성능을 극대화하고자 합니다.

### Timeline

- 2025년 7월 7일 - 프로젝트 시작
- 2025년 7월 17일 - 최종 모델 제출 마감일

### Evaluation

- 모델의 성능은 RMSE (Root Mean Squared Error)를 기준으로 평가됩니다. RMSE는 예측값과 실제값 사이의 오차 크기를 나타내며, 값이 낮을수록 모델의 예측 정확도가 높음을 의미합니다. 이 지표를 통해 모델의 예측 오차를 정량적으로 측정하고 성능을 비교합니다.



## 2. Components

### Directory

├── Reference Images/                   # 프로젝트 진행 중 참고했던 이미지 자료들
├── data/                               # 원본 및 전처리된 데이터셋
│   ├── data_collect/                   # 데이터 수집 관련 스크립트 및 원본 데이터 (예: passweak_area.zip)
│   └── process_data_collect/           # 수집된 데이터를 전처리하는 스크립트 및 처리된 데이터
├── eda/                                # 탐색적 데이터 분석(EDA) 스크립트 및 결과
│   ├── results/                        # EDA 분석 결과물 (예: 시각화 이미지, 요약 파일)
│   ├── __init__.py                     # (Python 패키지 초기화 파일)
│   ├── eda_main.py                     # 주요 EDA 실행 스크립트
│   ├── eda_utils.py                    # EDA 보조 함수 및 유틸리티 스크립트
│   ├── geo_feature_engineering.py      # 지리적 특징 공학 관련 EDA 스크립트
│   └── visualization.py                # EDA 시각화 관련 스크립트
├── model/                              # 모델 파이프라인 및 학습 코드
├── project1/                           # 특정 프로젝트(project1)의 EDA 결과 및 팀 사진
│   └── team_photos/                    # 팀원 사진
├── .gitignore                          # Git 버전 관리에서 제외할 파일 및 폴더 목록
├── README.md                           # 프로젝트 개요 및 설명 (현재 보고 계신 파일)
├── main_pipeline.py                    # 메인 데이터 처리 및 모델링 파이프라인 스크립트
└── requirements.txt                    # 프로젝트 실행에 필요한 모든 Python 라이브러리 및 패키지 목록


## 3. Data descrption

### Dataset overview

- 기본 제공 데이터:
주요 데이터는 .csv 형태로 제공되며, 서울시 아파트의 각 시점에서의 거래금액(만원)을 예측하는 것이 목표입니다.

학습 데이터: train.csv (1,118,822개 행, 52개 변수)

테스트 데이터: test.csv (garget 컬럼 제외)      

추가 제공 데이터: 서울시 지하철역, 서울시 버스정류장 정보가 제공됩니다.

이 데이터들은 위도, 경도, 좌표 X, 좌표 Y와 같은 거리 정보가 포함되어 있어 학습 데이터와의 연동에 활용됩니다.


별도로 추가한 외부 데이터

processed_academy.csv (학원 데이터)

processed_traffic.csv (통행불편지역 데이터)

processed_서울시경사도5000(geodata)(경사도 데이터)

processed_서울시등고선_5000(geodata) (등고선 데이터)

이 데이터들은 전처리 과정을 거쳐 모델링에 사용되었습니다.

### EDA

-데이터의 포괄적인 특성을 이해하고 예측 모델링을 위한 인사이트를 얻기 위해 광범위한 탐색적 데이터 분석(EDA)을 수행했습니다.

데이터 분포 및 품질 확인: 각 컬럼의 값 분포, 결측치 여부, 이상치 등을 시각화하여 데이터의 전반적인 상태를 진단하고 전처리 방향을 수립했습니다.

변수 간 상관관계 분석: 아파트 가격과 주요 지리적, 환경적 변수들 간의 상관관계를 파악하여 모델링에 활용할 핵심 피처들을 도출했습니다.

지리적/시간적 트렌드 분석: 시간에 따른 아파트 가격 변화 추이, 지역별 가격 편차, 특정 시설(학원, 지하철 등) 밀집도에 따른 가격 영향 등을 분석하여 지리적 특성의 중요성을 확인했습니다.

주요 결론: EDA를 통해 서울시 아파트 가격이 지역적 입지(교통, 학군, 편의시설 접근성) 및 고도와 같은 지형적 특성에 크게 영향을 받는다는 것을 확인했습니다. 또한, 특정 시기별 계절성도 가격 변동에 영향을 미치는 것으로 나타났습니다.

### Feature engineering

- 모델의 예측 성능을 극대화하기 위해 다음과 같은 지리 기반의 특징 공학(Feature Engineering) 작업을 정교하게 수행했습니다. Permutation Importance 분석을 통해 모델 성능에 부정적이거나 중요도가 낮은 피처들은 과감히 제거하여 모델의 효율성을 높였습니다.

지리적 거리 기반 피처 생성: 아파트의 '경도'와 '위도' 정보를 활용하여 주변 환경과의 거리를 기반으로 다양한 접근성 피처들을 생성했습니다.

대형 학원 피처: 아파트 500m/1km 반경 내 대형 학원 수(academy_500m, academy_1km) 및 학원 접근성(academy_access)을 계산하여 학군 영향도를 반영했습니다.

통행 불편 지역 피처: 1km 반경 내 통행 불편 지역 수(traffic_count_1km)와 그 영향도(traffic_impact)를 추가하여 교통 혼잡도를 반영했습니다.

버스 정류장 피처: 가장 가까운 버스 정류장까지의 거리(bus_min_dist), 200m/500m 반경 내 버스 정류장 수(bus_200m, bus_500m), 버스 접근성(bus_access)을 포함했습니다.

지하철역 피처: 가장 가까운 지하철역까지의 거리(subway_min_dist), 1km/2km 반경 내 지하철역 수(subway_1km, subway_2km), 지하철 접근성(subway_access)을 추가하여 대중교통 편의성을 반영했습니다.

등고선 피처: 아파트 위치의 고도 범위(elevation_range), 고도 표준 편차(elevation_std), 고도에 따른 지형 유형(terrain_type)을 분류하여 지형적 특성이 가격에 미치는 영향을 분석했습니다.

서울 랜드마크 피처: 서울 중심, 강남, 홍대, 잠실, 여의도 등 주요 랜드마크와의 거리를 계산하여 핵심 지역과의 접근성을 반영했습니다.

데이터 샘플링: 대규모 학습 데이터셋의 효율적인 처리를 위해, 데이터 수가 5만 개를 초과할 경우 5만 개로 샘플링하여 학습 시간을 단축했습니다. 테스트 데이터는 샘플링하지 않았습니다.

## 4. Modeling

### Model descrition

- 본 프로젝트에서는 회귀 문제 해결을 위해 Gradient Boosting Regressor 모델을 주 모델로 선정했습니다.

선정 이유: Gradient Boosting Regressor는 강력한 앙상블 학습 모델로, 정형 데이터 예측에서 뛰어난 성능을 보이는 것으로 정평이 나 있습니다. 특히, 복잡한 비선형 관계를 학습하는 데 효과적이며, Feature Engineering을 통해 생성된 다양한 지리적 특성들을 효율적으로 활용할 수 있을 것으로 판단했습니다.

하이퍼파라미터 튜닝: 모델의 최적 성능을 달성하기 위해 [예: Grid Search, Random Search, Optuna 등 구체적인 방법 명시]을 활용하여 최적의 하이퍼파라미터를 탐색했습니다.

### Modeling Process

- 환경 설정 및 데이터 로딩: 프로젝트 디렉토리를 설정하고, load_csv_safe 함수를 활용하여 학습 데이터, 테스트 데이터 및 다양한 보조 CSV 파일(학원, 교통, 대중교통, 등고선 데이터 등)을 안전하고 효율적으로 불러왔습니다. 특히 등고선 데이터는 자동으로 인식하고 정돈하는 특수 처리를 적용했습니다.

피처 엔지니어링 적용: 로딩된 데이터에 앞서 설명한 모든 지리적 및 환경적 특징 공학 기법을 적용하여 모델 학습에 최적화된 데이터셋을 구축했습니다.

타겟 변수 식별: 데이터프레임 내에서 아파트 실거래가를 나타내는 타겟 컬럼(price 또는 target)을 자동으로 식별했습니다.

기준 모델(Baseline) 성능 평가: 지리적 피처를 추가하기 전의 데이터로 Gradient Boosting Regressor 모델을 학습시키고, 훈련 세트와 테스트 세트를 8:2 비율로 분할하여 RMSE를 계산함으로써 기본 성능을 확인했습니다.

향상된 모델(Enhanced) 성능 평가: 새롭게 생성된 지리적 피처가 추가된 데이터로 Gradient Boosting Regressor 모델을 다시 학습시키고, 동일한 방식으로 RMSE를 계산하여 피처 엔지니어링의 성능 개선 효과를 정량적으로 평가했습니다.

성능 비교: 기준 모델과 향상된 모델의 RMSE를 비교하여 지리적 피처 추가로 인한 성능 향상률(예: +N.NN%)을 명확히 제시했습니다.

최종 모델 학습 및 예측: 가장 성능이 좋았던 Gradient Boosting Regressor 모델을 사용하여 5-Fold 교차 검증을 통해 모델의 안정성을 검증했습니다. 최종적으로 전체 훈련 데이터로 모델을 학습시킨 후, 전처리된 테스트 데이터에 대한 아파트 실거래가를 예측했습니다.

## 5. Result

### Leader Board

평가 지표: RMSE
- 23808.6398

## etc

### Reference
국채/gdp - 국가통계포털(KOSIS)

기준금리 - 한국은행경제통계시스템(ECOS)

그 외 데이터- 서울열린데이터광장
